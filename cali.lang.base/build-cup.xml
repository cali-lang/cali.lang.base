<project name="lang" default="compile" basedir=".">
    <description>
        Build file for parser CUP.
    </description>
    <property name="lib.dir" location="${basedir}/lib" />
    <property name="lib.depends" location="${basedir}/lib-depends" />
    <property name="parser.src.dir" location="${basedir}/src/com/cali" />
    <property name="cup" location="${basedir}/src/com/cali" />
    <property name="jflex" location="${basedir}/src/com/cali" />
    <property name="cup.dest" location="${basedir}/src" />
    <property name="classes" location="${basedir}/bin" />
    
    <taskdef name="jflex" classname="JFlex.anttask.JFlexTask"   classpath="${lib.dir}/JFlex.jar"   />
    <taskdef name="cup" classname="java_cup.anttask.CUPTask" classpath="${lib.dir}/java-cup-11b.jar"  />
    
	<target name="compile-parser">
	    <echo message="Generating lexer from ${jflex}/Scanner.jflex to dest dir ${cup.dest}" />
	    <delete file="${cup.dest}/cali/Lexer.java" />
	    <jflex file="${jflex}/Scanner.jflex" destdir="${cup.dest}" />
	    <echo message="Generating parser from ${cup}/cali.cup to dest dir ${cup.dest}" />
		<cup srcfile="${cup}/cali.cup" destdir="${cup.dest}" parser="parser" interface="false" locations="false" force="true" />
	</target>
</project>